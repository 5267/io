{% extends "base.html" %}
{% load django_markdown %}

{% block main %}

{% for article in articles %}
    {% if article.is_publish %}
    <div class="blog-post">
        <h2 class="blog-post-title"><a href="{{article.GetAbsoluteURL}}">{{article.title}}</a></h2>
        <p class="blog-post-meta">
            <span class="glyphicon glyphicon-calendar icon"></span>
            <span class="icon-text">{{article.create_date|date:"Y/m/d H:i:s"}}</span>
            <span class="glyphicon glyphicon-user icon"></span> 
            <span class="icon-text"><a href="www.baidu.com">{{article.author}}</span></a>
        </p>

        <p>
            {{article.text|markdown|safe|truncatewords_html:20}}
        </p>
        <p>
            <div class="readmore">
                <a href="{{article.GetAbsoluteURL}}"><span class="glyphicon glyphicon-plus"></span> more</a>
            </div>
        </p>

        <p class="blog-post-meta">
            <span class="glyphicon glyphicon-folder-open icon"></span>
            <span class="icon-text">{{article.GetCategory}}</span>
            <br>
            <span class="glyphicon glyphicon-tags icon"></span>
            <span class="icon-text">
                {% for tag in article.GetTags %}{{tag.name}}{% if not forloop.last %},{% endif %}{% endfor %}
            </span>
        </p>

        <hr class="line">   

    </div>
    {% endif %}
{% endfor %}

<nav>
    <ul class="pagination">
        {% if not articles.has_other_pages %}
        <li>
            {% if articles.has_previous %}
                <a href="?page={{ articles.previous_page_number }}" aria-label="Previous">
                    <span aria-hidden="true">
                        &laquo;
                    </span>
                </a>
            {% endif %}
        </li>

        {% for page_num in articles.paginator.page_range %}
            <li class="{% if page_num == articles.number %}active{% endif %}">
                <a href="?page={{ page_num }}">{{ page_num }}
                    <span class="sr-only">(current)</span>
                </a>
            </li>
        {% endfor %}

        <li>
            {% if articles.has_next %}
                <a href="?page={{ articles.next_page_number }}" aria-label="Next">
                    <span aria-hidden="true">
                        &raquo;
                    </span>
                </a>
            {% endif %}
        </li>
        {% endif %}
    </ul>
</nav>

{% endblock %}
